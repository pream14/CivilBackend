<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Generation Integration Example</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .export-buttons {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .btn-export {
            margin: 5px;
            min-width: 150px;
        }
        
        .table-container {
            margin-top: 20px;
        }
        
        .filter-section {
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 class="mb-4">Civil Backend - Report Generation Integration</h1>
        
        <!-- Project Details Page Example -->
        <div class="card mb-4">
            <div class="card-header">
                <h3><i class="fas fa-project-diagram"></i> Project Details Page</h3>
            </div>
            <div class="card-body">
                <div class="filter-section">
                    <h5>Filters</h5>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="projectName" class="form-label">Project Name</label>
                            <input type="text" class="form-control" id="projectName" value="Highway Masterplan">
                        </div>
                        <div class="col-md-3">
                            <label for="reportType" class="form-label">Report Type</label>
                            <select class="form-select" id="reportType">
                                <option value="all">All Data</option>
                                <option value="employee">Employee Details</option>
                                <option value="category">Category Details</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="export-buttons">
                    <h5><i class="fas fa-download"></i> Export Reports</h5>
                    <button onclick="downloadProjectPDF()" class="btn btn-primary btn-export">
                        <i class="fas fa-file-pdf"></i> Download as PDF
                    </button>
                    <button onclick="downloadProjectExcel()" class="btn btn-success btn-export">
                        <i class="fas fa-file-excel"></i> Download as Excel
                    </button>
                </div>
                
                <div class="table-container">
                    <h5>Project Data Table</h5>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Date</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Mason</td>
                                <td>Labour</td>
                                <td>2024-01-15</td>
                                <td>₹15,000</td>
                            </tr>
                            <tr>
                                <td>Cement</td>
                                <td>Material</td>
                                <td>2024-01-16</td>
                                <td>₹25,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- User Financial Detail Screen Example -->
        <div class="card mb-4">
            <div class="card-header">
                <h3><i class="fas fa-user"></i> User Financial Detail Screen</h3>
            </div>
            <div class="card-body">
                <div class="filter-section">
                    <h5>Filters</h5>
                    <div class="row">
                        <div class="col-md-2">
                            <label for="userId" class="form-label">User ID</label>
                            <input type="text" class="form-control" id="userId" value="USER001">
                        </div>
                        <div class="col-md-3">
                            <label for="startDate" class="form-label">Start Date</label>
                            <input type="date" class="form-control" id="startDate" value="2024-01-01">
                        </div>
                        <div class="col-md-3">
                            <label for="endDate" class="form-label">End Date</label>
                            <input type="date" class="form-control" id="endDate" value="2024-12-31">
                        </div>
                    </div>
                </div>
                
                <div class="export-buttons">
                    <h5><i class="fas fa-download"></i> Export Reports</h5>
                    <button onclick="downloadUserFinancialPDF()" class="btn btn-primary btn-export">
                        <i class="fas fa-file-pdf"></i> Download as PDF
                    </button>
                    <button onclick="downloadUserFinancialExcel()" class="btn btn-success btn-export">
                        <i class="fas fa-file-excel"></i> Download as Excel
                    </button>
                </div>
                
                <div class="table-container">
                    <h5>User Financial Data Table</h5>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Project Name</th>
                                <th>Date</th>
                                <th>Amount</th>
                                <th>Category</th>
                                <th>Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Highway Masterplan</td>
                                <td>2024-01-15</td>
                                <td>₹15,000</td>
                                <td>Mason</td>
                                <td>Labour</td>
                            </tr>
                            <tr>
                                <td>Commercial Development</td>
                                <td>2024-01-20</td>
                                <td>₹25,000</td>
                                <td>Cement</td>
                                <td>Material</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- API Documentation -->
        <div class="card">
            <div class="card-header">
                <h3><i class="fas fa-code"></i> API Endpoints</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Project Reports</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <strong>PDF:</strong> <code>/download-project-report-pdf</code>
                            </li>
                            <li class="list-group-item">
                                <strong>Excel:</strong> <code>/download-project-report-excel</code>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>User Financial Reports</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <strong>PDF:</strong> <code>/download-user-financial-report-pdf</code>
                            </li>
                            <li class="list-group-item">
                                <strong>Excel:</strong> <code>/download-user-financial-report-excel</code>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Project Details Page Functions
        function downloadProjectPDF() {
            const projectName = document.getElementById('projectName').value;
            const reportType = document.getElementById('reportType').value;
            
            if (!projectName) {
                alert('Please enter a project name');
                return;
            }
            
            const url = `/download-project-report-pdf?projectname=${encodeURIComponent(projectName)}&type=${reportType}`;
            window.open(url, '_blank');
        }
        
        function downloadProjectExcel() {
            const projectName = document.getElementById('projectName').value;
            const reportType = document.getElementById('reportType').value;
            
            if (!projectName) {
                alert('Please enter a project name');
                return;
            }
            
            const url = `/download-project-report-excel?projectname=${encodeURIComponent(projectName)}&type=${reportType}`;
            window.open(url, '_blank');
        }
        
        // User Financial Detail Screen Functions
        function downloadUserFinancialPDF() {
            const userId = document.getElementById('userId').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (!userId) {
                alert('Please enter a user ID');
                return;
            }
            
            let url = `/download-user-financial-report-pdf?id=${encodeURIComponent(userId)}`;
            if (startDate) url += `&start_date=${startDate}`;
            if (endDate) url += `&end_date=${endDate}`;
            
            window.open(url, '_blank');
        }
        
        function downloadUserFinancialExcel() {
            const userId = document.getElementById('userId').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (!userId) {
                alert('Please enter a user ID');
                return;
            }
            
            let url = `/download-user-financial-report-excel?id=${encodeURIComponent(userId)}`;
            if (startDate) url += `&start_date=${startDate}`;
            if (endDate) url += `&end_date=${endDate}`;
            
            window.open(url, '_blank');
        }
        
        // Set default dates
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const thirtyDaysAgo = new Date(today.getTime() - (30 * 24 * 60 * 60 * 1000));
            
            document.getElementById('startDate').value = thirtyDaysAgo.toISOString().split('T')[0];
            document.getElementById('endDate').value = today.toISOString().split('T')[0];
        });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 